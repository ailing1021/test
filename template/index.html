<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ’° è¶…ç´šé‚„æ¬¾è©¦ç®—è¡¨ - å°ˆæ¥­ç‰ˆ</title>

  <!-- React & ReactDOM -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" crossorigin></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" crossorigin></script>
  <!-- Babel for JSX in browser -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.20.12/babel.min.js"></script>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    html, body {
      height: 100%;
      margin: 0; padding: 0;
      background-color: #f0f4f8;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
    }
    #root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      padding-bottom: 4rem; /* ç•™çµ¦å›ºå®šfooterç©ºé–“ */
    }
    /* fixed footer */
    footer {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      background: #1f2937; /* Tailwind gray-800 */
      color: #d1d5db; /* Tailwind gray-300 */
      padding: 0.75rem 1rem;
      box-shadow: inset 0 1px 0 rgba(255 255 255 / 0.1);
      font-size: 0.875rem; /* text-sm */
      z-index: 1000;
    }
    footer a {
      color: #9ca3af; /* Tailwind gray-400 */
      text-decoration: none;
      margin: 0 1rem;
      transition: color 0.2s ease-in-out;
    }
    footer a:hover {
      color: #f9fafb; /* Tailwind gray-50 */
      text-decoration: underline;
    }
    /* Scrollbar for table overflow */
    .table-container {
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <footer className="footer">
    <nav className="flex justify-center">
      <a href="/privacy" target="_blank" rel="noopener noreferrer">éš±ç§æ¬Šæ”¿ç­–</a>
      <a href="/terms" target="_blank" rel="noopener noreferrer">æœå‹™æ¢æ¬¾</a>
      <a href="/disclaimer" target="_blank" rel="noopener noreferrer">å…è²¬è²æ˜</a>
      <a href="/contact" target="_blank" rel="noopener noreferrer">è¯çµ¡æˆ‘å€‘</a>
    </nav>
  </footer>

  <script type="text/babel">

  // Utility: currency formatter
  const currencyFormatter = new Intl.NumberFormat('zh-TW', { style: 'currency', currency: 'TWD' });

  // ErrorBoundaryå…ƒä»¶ï¼Œæ•æ‰å­å…ƒä»¶éŒ¯èª¤
  class ErrorBoundary extends React.Component {
    constructor(props) {
      super(props);
      this.state = { hasError: false, error: null };
    }
    static getDerivedStateFromError(error) {
      return { hasError: true, error };
    }
    componentDidCatch(error, info) {
      console.error("ErrorBoundary caught:", error, info);
    }
    render() {
      if (this.state.hasError) {
        return (
          <div className="p-8 text-center">
            <h1 className="text-3xl font-bold text-red-600 mb-4">ç™¼ç”ŸéŒ¯èª¤</h1>
            <p className="mb-6">è«‹é‡æ–°æ•´ç†é é¢æˆ–è¯çµ¡å®¢æœã€‚</p>
            <button
              onClick={() => window.location.reload()}
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
            >
              é‡æ–°æ•´ç†
            </button>
          </div>
        );
      }
      return this.props.children;
    }
  }

  // æ–°å¢é‚„æ¬¾äººè¡¨å–®
  function AddPersonForm({ onAdd }) {
    const [name, setName] = React.useState('');
    const [debt, setDebt] = React.useState('');

    function handleSubmit(e) {
      e.preventDefault();
      if (!name.trim()) { alert('å§“åä¸èƒ½ç©ºç™½'); return; }
      if (isNaN(parseFloat(debt)) || parseFloat(debt) <= 0) { alert('æ¬ æ¬¾é‡‘é¡éœ€å¤§æ–¼0'); return; }
      onAdd(name.trim(), parseFloat(debt));
      setName('');
      setDebt('');
    }

    return (
      <form onSubmit={handleSubmit} className="mb-4 p-4 bg-white rounded shadow">
        <h2 className="text-xl font-semibold mb-3">æ–°å¢é‚„æ¬¾äºº</h2>
        <div className="flex flex-col sm:flex-row gap-4 items-center">
          <input
            className="border p-2 rounded flex-grow"
            placeholder="å§“å"
            value={name}
            onChange={e => setName(e.target.value)}
            required
          />
          <input
            type="number"
            className="border p-2 rounded flex-grow"
            placeholder="æ¬ æ¬¾é‡‘é¡ (NT$)"
            value={debt}
            onChange={e => setDebt(e.target.value)}
            required
            min="0"
            step="0.01"
          />
          <button type="submit" className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
            æ–°å¢
          </button>
        </div>
      </form>
    );
  }

  // æ–°å¢èª²ç¨‹è¡¨å–®
  function AddCourseForm({ onAdd }) {
    const [fee, setFee] = React.useState('');
    const [months, setMonths] = React.useState('');

    function handleSubmit(e) {
      e.preventDefault();
      if (isNaN(parseFloat(fee)) || parseFloat(fee) <= 0) { alert('èª²ç¨‹è²»ç”¨éœ€å¤§æ–¼0'); return; }
      if (!Number.isInteger(Number(months)) || Number(months) <= 0) { alert('èª²ç¨‹æœŸæ•¸éœ€ç‚ºå¤§æ–¼0æ•´æ•¸'); return; }
      onAdd(parseFloat(fee), parseInt(months));
      setFee('');
      setMonths('');
    }

    return (
      <form onSubmit={handleSubmit} className="mb-4 p-4 bg-white rounded shadow">
        <h2 className="text-xl font-semibold mb-3">æ–°å¢èª²ç¨‹</h2>
        <div className="flex flex-col sm:flex-row gap-4 items-center">
          <input
            type="number"
            className="border p-2 rounded flex-grow"
            placeholder="èª²ç¨‹ç¸½è²»ç”¨ (NT$)"
            value={fee}
            onChange={e => setFee(e.target.value)}
            min="0"
            step="0.01"
            required
          />
          <input
            type="number"
            className="border p-2 rounded flex-grow"
            placeholder="æœŸæ•¸"
            value={months}
            onChange={e => setMonths(e.target.value)}
            min="1"
            required
          />
          <button type="submit" className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            æ–°å¢
          </button>
        </div>
      </form>
    );
  }

  // é‚„æ¬¾äººåˆ—è¡¨
  function RepayList({ list, onRemove }) {
    return (
      <div className="mb-6 p-4 bg-white rounded shadow">
        <h2 className="text-xl font-semibold mb-3">é‚„æ¬¾äººåˆ—è¡¨</h2>
        <div className="table-container max-h-96 overflow-auto">
          <table className="min-w-full border border-gray-300">
            <thead className="bg-gray-100 sticky top-0">
              <tr>
                <th className="border px-4 py-2">å§“å</th>
                <th className="border px-4 py-2">æ¬ æ¬¾é‡‘é¡ (NT$)</th>
                <th className="border px-4 py-2">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              {list.length === 0 && (
                <tr><td colSpan="3" className="text-center p-4 text-gray-500">å°šç„¡è³‡æ–™</td></tr>
              )}
              {list.map((p, i) => (
                <tr key={i} className="hover:bg-gray-50">
                  <td className="border px-4 py-2">{p.name}</td>
                  <td className="border px-4 py-2">{currencyFormatter.format(p.debt)}</td>
                  <td className="border px-4 py-2 text-center">
                    <button
                      onClick={() => onRemove(i)}
                      className="text-red-600 hover:text-red-800"
                      title="ç§»é™¤"
                    >âŒ</button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    );
  }

  // èª²ç¨‹åˆ—è¡¨
  function CourseList({ list, onRemove }) {
    return (
      <div className="mb-6 p-4 bg-white rounded shadow">
        <h2 className="text-xl font-semibold mb-3">èª²ç¨‹åˆ—è¡¨</h2>
        <div className="table-container max-h-80 overflow-auto">
          <table className="min-w-full border border-gray-300">
            <thead className="bg-gray-100 sticky top-0">
              <tr>
                <th className="border px-4 py-2">èª²ç¨‹è²»ç”¨ (NT$)</th>
                <th className="border px-4 py-2">æœŸæ•¸</th>
                <th className="border px-4 py-2">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              {list.length === 0 && (
                <tr><td colSpan="3" className="text-center p-4 text-gray-500">å°šç„¡è³‡æ–™</td></tr>
              )}
              {list.map((c, i) => (
                <tr key={i} className="hover:bg-gray-50">
                  <td className="border px-4 py-2">{currencyFormatter.format(c.fee)}</td>
                  <td className="border px-4 py-2 text-center">{c.months}</td>
                  <td className="border px-4 py-2 text-center">
                    <button
                      onClick={() => onRemove(i)}
                      className="text-red-600 hover:text-red-800"
                      title="ç§»é™¤"
                    >âŒ</button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    );
  }

  // è–ªè³‡èˆ‡ç”Ÿæ´»è²»è¨­å®šè¡¨å–®
  function SalaryExpenseForm({ salary, livingExpense, startMonth, onSetSalary, onSetExpense, onSetMonth }) {
    const [salaryInput, setSalaryInput] = React.useState(salary);
    const [expenseInput, setExpenseInput] = React.useState(livingExpense);
    const [monthInput, setMonthInput] = React.useState(startMonth);

    React.useEffect(() => { setSalaryInput(salary); }, [salary]);
    React.useEffect(() => { setExpenseInput(livingExpense); }, [livingExpense]);
    React.useEffect(() => { setMonthInput(startMonth); }, [startMonth]);

    function onSalaryBlur() {
      onSetSalary(parseFloat(salaryInput));
    }
    function onExpenseBlur() {
      onSetExpense(parseFloat(expenseInput));
    }
    function onMonthBlur() {
      const m = parseInt(monthInput);
      if (m >= 1 && m <= 12) {
        onSetMonth(m);
      } else {
        alert("èµ·å§‹æœˆä»½å¿…é ˆæ˜¯1~12");
        setMonthInput(startMonth);
      }
    }

    return (
      <div className="mb-6 p-4 bg-white rounded shadow grid grid-cols-1 sm:grid-cols-3 gap-4">
        <div>
          <label className="block font-semibold mb-1">è–ªè³‡ (NT$)</label>
          <input
            type="number"
            min="0"
            step="0.01"
            className="border p-2 rounded w-full"
            value={salaryInput}
            onChange={e => setSalaryInput(e.target.value)}
            onBlur={onSalaryBlur}
          />
        </div>
        <div>
          <label className="block font-semibold mb-1">ç”Ÿæ´»è²» (NT$)</label>
          <input
            type="number"
            min="0"
            step="0.01"
            className="border p-2 rounded w-full"
            value={expenseInput}
            onChange={e => setExpenseInput(e.target.value)}
            onBlur={onExpenseBlur}
          />
        </div>
        <div>
          <label className="block font-semibold mb-1">èµ·å§‹æœˆä»½</label>
          <input
            type="number"
            min="1"
            max="12"
            className="border p-2 rounded w-full"
            value={monthInput}
            onChange={e => setMonthInput(e.target.value)}
            onBlur={onMonthBlur}
          />
        </div>
      </div>
    );
  }

  // è©¦ç®—çµæœé¡¯ç¤ºèˆ‡è¤‡è£½åŒ¯å‡ºå€å¡Š
  function ResultPanel({ result, onCopy, onExportCsv }) {
    // å°‡è©¦ç®—çµæœï¼ˆå­—ä¸²æˆ–JSONï¼‰è§£ææˆè¡¨æ ¼é¡¯ç¤º
    const [tableData, setTableData] = React.useState({ headers: [], rows: [] });

    React.useEffect(() => {
      if (!result) {
        setTableData({ headers: [], rows: [] });
        return;
      }
      // å˜—è©¦è§£æJSON
      try {
        const parsed = JSON.parse(result);
        if (parsed.headers && parsed.rows) {
          setTableData(parsed);
          return;
        }
      } catch {}

      // å˜—è©¦ç”¨Tabåˆ†éš”å­—ä¸²æ‹†è¡¨
      const lines = result.trim().split('\n');
      if (lines.length > 1) {
        const headers = lines[0].split('\t').map(h => h.trim());
        const rows = lines.slice(1).map(l => l.split('\t').map(cell => cell.trim()));
        setTableData({ headers, rows });
      }
    }, [result]);

    return (
      <div className="mb-6 p-4 bg-white rounded shadow">
        <h2 className="text-xl font-semibold mb-3">è©¦ç®—çµæœ</h2>
        {result ? (
          <>
            <div className="table-container max-h-80 overflow-auto mb-4">
              <table className="min-w-full border border-gray-300">
                <thead className="bg-gray-100 sticky top-0">
                  <tr>
                    {tableData.headers.map((h, i) => (
                      <th key={i} className="border px-4 py-2 text-left">{h}</th>
                    ))}
                  </tr>
                </thead>
                <tbody>
                  {tableData.rows.map((row, rIdx) => (
                    <tr key={rIdx} className={rIdx % 2 === 0 ? 'bg-white' : 'bg-gray-50'}>
                      {row.map((cell, cIdx) => (
                        <td key={cIdx} className="border px-4 py-2">{cell}</td>
                      ))}
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
            <div className="flex gap-4 justify-end">
              <button
                onClick={onCopy}
                className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
              >
                è¤‡è£½çµæœ
              </button>
              <button
                onClick={onExportCsv}
                className="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
              >
                åŒ¯å‡º CSV
              </button>
            </div>
          </>
        ) : (
          <p className="text-gray-500">å°šç„¡è©¦ç®—çµæœ</p>
        )}
      </div>
    );
  }

  // Chartå…ƒä»¶ï¼ˆé¡¯ç¤ºç¸½æ¬ æ¬¾åˆ†å¸ƒåœ“é¤…åœ–ï¼‰
  function DebtChart({ repayList }) {
    const canvasRef = React.useRef(null);
    React.useEffect(() => {
      if (!canvasRef.current) return;

      const existingChart = Chart.getChart(canvasRef.current);
      if (existingChart) existingChart.destroy();

      const labels = repayList.map(p => p.name);
      const dataValues = repayList.map(p => p.debt);

      if (dataValues.length === 0) return;

      const colors = [
        '#3b82f6','#10b981','#ef4444','#f59e0b','#8b5cf6',
        '#06b6d4','#db2777','#6d28d9','#ca8a04','#4ade80'
      ];

      new Chart(canvasRef.current, {
        type: 'pie',
        data: {
          labels,
          datasets: [{
            data: dataValues,
            backgroundColor: colors.slice(0, labels.length),
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { position: 'bottom' },
            tooltip: { enabled: true }
          }
        }
      });

    }, [repayList]);

    return (
      <div className="mb-6 p-4 bg-white rounded shadow max-w-md mx-auto">
        <h2 className="text-xl font-semibold mb-3 text-center">æ¬ æ¬¾åˆ†å¸ƒåœ“é¤…åœ–</h2>
        {repayList.length === 0 ? (
          <p className="text-center text-gray-500">å°šç„¡é‚„æ¬¾äººè³‡æ–™</p>
        ) : (
          <canvas ref={canvasRef}></canvas>
        )}
      </div>
    );
  }

  // ä¸»Appå…ƒä»¶
  function App() {
    // ç‹€æ…‹ç®¡ç†
    const [salary, setSalary] = React.useState(0);
    const [livingExpense, setLivingExpense] = React.useState(5000);
    const [startMonth, setStartMonth] = React.useState(1);

    const [repayList, setRepayList] = React.useState([]);
    const [courseList, setCourseList] = React.useState([]);

    const [resultText, setResultText] = React.useState('');

    // æ–°å¢é‚„æ¬¾äºº
    function addPerson(name, debt) {
      setRepayList(prev => [...prev, { name, debt }]);
    }
    // åˆªé™¤é‚„æ¬¾äºº
    function removePerson(idx) {
      setRepayList(prev => prev.filter((_, i) => i !== idx));
    }

    // æ–°å¢èª²ç¨‹
    function addCourse(fee, months) {
      setCourseList(prev => [...prev, { fee, months }]);
    }
    // åˆªé™¤èª²ç¨‹
    function removeCourse(idx) {
      setCourseList(prev => prev.filter((_, i) => i !== idx));
    }

    // åŸ·è¡Œè©¦ç®—ä¸»é‚è¼¯
    function runCalculation() {
      // æª¢æŸ¥åŸºæœ¬è³‡æ–™
      if (salary <= 0) {
        alert("è–ªè³‡éœ€å¤§æ–¼0");
        return;
      }
      if (livingExpense < 0) {
        alert("ç”Ÿæ´»è²»ä¸å¯ç‚ºè² ");
        return;
      }
      if (startMonth < 1 || startMonth > 12) {
        alert("èµ·å§‹æœˆä»½éœ€ä»‹æ–¼1~12");
        return;
      }
      if (repayList.length === 0) {
        alert("è«‹è‡³å°‘æ–°å¢ä¸€å€‹é‚„æ¬¾äºº");
        return;
      }
      if (courseList.length === 0) {
        alert("è«‹è‡³å°‘æ–°å¢ä¸€å€‹èª²ç¨‹");
        return;
      }

      // å‡è¨­é‚è¼¯ï¼šè¨ˆç®—é‚„æ¬¾ç¸½é¡èˆ‡æ™‚é–“ï¼Œç°¡å–®è©¦ç®— (å¯è‡ªè¡Œæ“´å……)
      // é‚„æ¬¾æœˆå¯ç”¨è–ªè³‡æ‰£é™¤ç”Ÿæ´»è²»ï¼Œå‡åˆ†çµ¦æ¬ æ¬¾äººå’Œèª²ç¨‹åˆ†æœŸã€‚

      const availablePerMonth = salary - livingExpense;
      if (availablePerMonth <= 0) {
        alert("è–ªè³‡æ‰£é™¤ç”Ÿæ´»è²»å¾Œé ˆå¤§æ–¼0");
        return;
      }

      // ç¸½æ¬ æ¬¾èˆ‡èª²ç¨‹ç¸½æœŸæ•¸è¨ˆç®—
      const totalDebt = repayList.reduce((a, c) => a + c.debt, 0);
      const totalCourseFee = courseList.reduce((a, c) => a + c.fee, 0);
      const totalCourseMonths = courseList.reduce((a, c) => a + c.months, 0);

      // é‚„æ¬¾äººåˆ†æ”¤é‡‘é¡æ¯”ä¾‹
      const repayRatios = repayList.map(p => p.debt / totalDebt);

      // é–‹å§‹ç”¢ç”Ÿè©¦ç®—è¡¨ï¼ˆCSVæ¨£å¼æ–‡å­—ï¼‰
      let output = "æœˆä»½\té‚„æ¬¾äºº\tæ¬ æ¬¾é¤˜é¡\tèª²ç¨‹åˆ†æœŸæ”¯å‡º\tå¯æ”¯é…é‡‘é¡\n";

      // ç°¡å–®é‚è¼¯ï¼šæ¯æœˆå…ˆæ‰£èª²ç¨‹åˆ†æœŸè²»ç”¨ï¼Œå‰©ä¸‹çš„å¯æ”¯é…é‡‘é¡å‡åˆ†çµ¦é‚„æ¬¾äººé‚„æ¬¾
      // èª²ç¨‹åˆ†æœŸè²»ç”¨ = å„èª²ç¨‹è²»ç”¨ / æœŸæ•¸ï¼ŒæœŸæ•¸æœŸé–“å…§æ¯æœˆç¹³äº¤ï¼Œè¶…éæœŸæ•¸å¾Œ0
      // æ¬ æ¬¾é¤˜é¡æ¯æœˆæ¸›å°‘é‚„æ¬¾é‡‘é¡

      // åˆå§‹åŒ–æ¬ æ¬¾é¤˜é¡
      let debtsLeft = repayList.map(p => p.debt);

      let monthIdx = startMonth;
      let year = new Date().getFullYear();

      let maxIter = 240; // æœ€å¤šè©¦ç®—20å¹´é˜²æ­»å¾ªç’°

      for (let i = 0; i < maxIter; i++) {
        if (debtsLeft.every(d => d <= 0)) break; // å…¨éƒ¨é‚„æ¸…

        // è©²æœˆèª²ç¨‹åˆ†æœŸæ”¯å‡º
        let coursePayThisMonth = 0;
        for (const c of courseList) {
          if (i < c.months) coursePayThisMonth += c.fee / c.months;
        }

        // å¯æ”¯é…é‡‘é¡ï¼šæ‰£é™¤èª²ç¨‹åˆ†æœŸå¾Œ
        let disposable = availablePerMonth - coursePayThisMonth;
        if (disposable < 0) disposable = 0;

        // é‚„æ¬¾äººæ¯äººåˆ†æ”¤
        let repayThisMonth = debtsLeft.map((d, idx) => {
          if (d <= 0) return 0;
          return Math.min(d, disposable * repayRatios[idx]);
        });

        // æ‰£é™¤é‚„æ¬¾
        debtsLeft = debtsLeft.map((d, idx) => Math.max(0, d - repayThisMonth[idx]));

        // è¨ˆç®—æœˆä»½é¡¯ç¤ºæ–‡å­—
        let displayMonth = `${year}å¹´${monthIdx}æœˆ`;

        // å°‡æ¯é‚„æ¬¾äººçµæœè¼¸å‡º
        for (let j = 0; j < repayList.length; j++) {
          output += `${displayMonth}\t${repayList[j].name}\t${debtsLeft[j].toFixed(2)}\t${coursePayThisMonth.toFixed(2)}\t${disposable.toFixed(2)}\n`;
        }

        monthIdx++;
        if (monthIdx > 12) {
          monthIdx = 1;
          year++;
        }
      }

      setResultText(output);
    }

    // è¤‡è£½çµæœæ–‡å­—åˆ°å‰ªè²¼ç°¿
    function copyResultToClipboard() {
      if (!resultText) return;
      navigator.clipboard.writeText(resultText).then(() => {
        alert("çµæœå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼");
      });
    }

    // åŒ¯å‡º CSV æª”æ¡ˆ
    function exportCsv() {
      if (!resultText) return;
      const blob = new Blob([resultText], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `repay_calculation_${new Date().toISOString().slice(0,10)}.csv`;
      a.click();
      URL.revokeObjectURL(url);
    }

    return (
      <div className="flex-grow max-w-6xl mx-auto p-4">
        <h1 className="text-3xl font-bold text-center mb-8">ğŸ’° è¶…ç´šé‚„æ¬¾è©¦ç®—è¡¨ - å°ˆæ¥­ç‰ˆ</h1>

        <SalaryExpenseForm
          salary={salary}
          livingExpense={livingExpense}
          startMonth={startMonth}
          onSetSalary={setSalary}
          onSetExpense={setLivingExpense}
          onSetMonth={setStartMonth}
        />

        <AddPersonForm onAdd={addPerson} />
        <RepayList list={repayList} onRemove={removePerson} />

        <AddCourseForm onAdd={addCourse} />
        <CourseList list={courseList} onRemove={removeCourse} />

        <div className="flex justify-center mb-6">
          <button
            onClick={runCalculation}
            className="bg-purple-700 text-white px-6 py-3 rounded hover:bg-purple-800 transition"
          >
            åŸ·è¡Œè©¦ç®—
          </button>
        </div>

        <ResultPanel
          result={resultText}
          onCopy={copyResultToClipboard}
          onExportCsv={exportCsv}
        />

        <DebtChart repayList={repayList} />
      </div>
    );
  }

  // Render App with ErrorBoundary
  ReactDOM.createRoot(document.getElementById('root')).render(
    <ErrorBoundary>
      <App />
    </ErrorBoundary>
  );
  </script>
</body>
</html>
